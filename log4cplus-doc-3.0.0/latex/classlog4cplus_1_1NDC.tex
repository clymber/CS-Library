\hypertarget{classlog4cplus_1_1NDC}{}\doxysection{log4cplus\+::NDC Class Reference}
\label{classlog4cplus_1_1NDC}\index{log4cplus::NDC@{log4cplus::NDC}}


The \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} class implements {\itshape nested diagnostic contexts} as defined by Neil Harrison in the article \char`\"{}\+Patterns for Logging \+Diagnostic Messages\char`\"{} part of the book {\itshape \char`\"{}\+Pattern Languages of \+Program Design 3\char`\"{}} edited by Martin et al.  




{\ttfamily \#include $<$ndc.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_a822956761c830e6b9c37795fc0252211}{clear}} ()
\begin{DoxyCompactList}\small\item\em Clear any nested diagnostic information if any. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacelog4cplus_ac62a7721683971c9b4f2b697aa7f03fb}{Diagnostic\+Context\+Stack}} \mbox{\hyperlink{classlog4cplus_1_1NDC_a7b5a0763d669cd127afa640e586f6a13}{clone\+Stack}} () const
\begin{DoxyCompactList}\small\item\em Clone the diagnostic context for the current thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_a64169c244e495627d267f8d2d1105d32}{inherit}} (const \mbox{\hyperlink{namespacelog4cplus_ac62a7721683971c9b4f2b697aa7f03fb}{Diagnostic\+Context\+Stack}} \&stack)
\begin{DoxyCompactList}\small\item\em Inherit the diagnostic context of another thread. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} const \& \mbox{\hyperlink{classlog4cplus_1_1NDC_ab5e5003eaa2ee38bd3363a39aed524a3}{get}} () const
\begin{DoxyCompactList}\small\item\em Used when printing the diagnostic context. \end{DoxyCompactList}\item 
std\+::size\+\_\+t \mbox{\hyperlink{classlog4cplus_1_1NDC_a0c192fcb5006c24cf54e679e9e16c284}{get\+Depth}} () const
\begin{DoxyCompactList}\small\item\em Get the current nesting depth of this diagnostic context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop}} ()
\begin{DoxyCompactList}\small\item\em Clients should call this method before leaving a diagnostic context. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_ac5334784c1ddcc371d0140f5d97a6a1e}{pop\+\_\+void}} ()
\begin{DoxyCompactList}\small\item\em Same as \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}} but without the return value. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} const \& \mbox{\hyperlink{classlog4cplus_1_1NDC_a752d464b7a0572aa4e32185ce83ea6ad}{peek}} () const
\begin{DoxyCompactList}\small\item\em Looks at the last diagnostic context at the top of this \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} without removing it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push}} (const \mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} \&message)
\begin{DoxyCompactList}\small\item\em Push new diagnostic context information for the current thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_a5b4fb3774bbf66b9d8c995a57ee26feb}{push}} (\mbox{\hyperlink{namespacelog4cplus_a7b80b5711ae9e7a1ddd97dbaefbe3583}{tchar}} const $\ast$message)
\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove}} ()
\begin{DoxyCompactList}\small\item\em Remove the diagnostic context for this thread. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}{set\+Max\+Depth}} (std\+::size\+\_\+t max\+Depth)
\begin{DoxyCompactList}\small\item\em Set maximum depth of this diagnostic context. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classlog4cplus_1_1NDC_a8da3dcc190abd896c5f73cf1b968251f}{NDC}} ()
\item 
virtual \mbox{\hyperlink{classlog4cplus_1_1NDC_a574bfc5324baa601923df750a65e5c48}{$\sim$\+NDC}} ()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
The \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} class implements {\itshape nested diagnostic contexts} as defined by Neil Harrison in the article \char`\"{}\+Patterns for Logging \+Diagnostic Messages\char`\"{} part of the book {\itshape \char`\"{}\+Pattern Languages of \+Program Design 3\char`\"{}} edited by Martin et al. 

A Nested Diagnostic Context, or \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} in short, is an instrument to distinguish interleaved log output from different sources. Log output is typically interleaved when a server handles multiple clients near-\/simultaneously.

Interleaved log output can still be meaningful if each log entry from different contexts had a distinctive stamp. This is where NDCs come into play.

{\itshape {\bfseries{Note that NDCs are managed on a per thread basis}}}. \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} operations such as {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push}}}, {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop}}}, {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a822956761c830e6b9c37795fc0252211}{clear}}}, {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a0c192fcb5006c24cf54e679e9e16c284}{get\+Depth}}} and {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}{set\+Max\+Depth}}} affect the \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} of the {\itshape current} thread only. NDCs of other threads remain unaffected.

For example, a server can build a per client request \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} consisting the clients host name and other information contained in the the request. {\itshape Cookies} are another source of distinctive information. To build an \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} one uses the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push}}} operation. Simply put,


\begin{DoxyItemize}
\item Contexts can be nested.
\item When entering a context, call {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}}}. As a side effect, if there is no nested diagnostic context for the current thread, this method will create it.
\item When leaving a context, call {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}}.
\item When exiting a thread make sure to call {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove()}}}.
\end{DoxyItemize}

There is no penalty for forgetting to match each \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}} operation with a corresponding \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}, except the obvious mismatch between the real application context and the context set in the \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}}. Use of the \mbox{\hyperlink{classlog4cplus_1_1NDCContextCreator}{NDCContext\+Creator}} class can automate this process and make your code exception-\/safe.

If configured to do so, {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1PatternLayout}{log4cplus\+::\+Pattern\+Layout}}} and {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1TTCCLayout}{log4cplus\+::\+TTCCLayout}}} instances automatically retrieve the nested diagnostic context for the current thread without any user intervention. Hence, even if a server is serving multiple clients simultaneously, the logs emanating from the same code (belonging to the same logger) can still be distinguished because each client request will have a different \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} tag.

Heavy duty systems should call the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove}}} method when leaving the run method of a thread. This ensures that the memory used by the thread can be freed.

A thread may inherit the nested diagnostic context of another (possibly parent) thread using the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a64169c244e495627d267f8d2d1105d32}{inherit}}} method. A thread may obtain a copy of its \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} with the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a7b5a0763d669cd127afa640e586f6a13}{clone\+Stack}}} method and pass the reference to any other thread, in particular to a child. 

Definition at line \mbox{\hyperlink{ndc_8h_source_l00105}{105}} of file \mbox{\hyperlink{ndc_8h_source}{ndc.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a8da3dcc190abd896c5f73cf1b968251f}\label{classlog4cplus_1_1NDC_a8da3dcc190abd896c5f73cf1b968251f}} 
\index{log4cplus::NDC@{log4cplus::NDC}!NDC@{NDC}}
\index{NDC@{NDC}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{NDC()}{NDC()}}
{\footnotesize\ttfamily log4cplus\+::\+NDC\+::\+NDC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classlog4cplus_1_1NDC_a574bfc5324baa601923df750a65e5c48}\label{classlog4cplus_1_1NDC_a574bfc5324baa601923df750a65e5c48}} 
\index{log4cplus::NDC@{log4cplus::NDC}!````~NDC@{$\sim$NDC}}
\index{````~NDC@{$\sim$NDC}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{$\sim$NDC()}{~NDC()}}
{\footnotesize\ttfamily virtual log4cplus\+::\+NDC\+::$\sim$\+NDC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a822956761c830e6b9c37795fc0252211}\label{classlog4cplus_1_1NDC_a822956761c830e6b9c37795fc0252211}} 
\index{log4cplus::NDC@{log4cplus::NDC}!clear@{clear}}
\index{clear@{clear}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{clear()}{clear()}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clear any nested diagnostic information if any. 

This method is useful in cases where the same thread can be potentially used over and over in different unrelated contexts.

This method is equivalent to calling the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}{set\+Max\+Depth}}} method with a zero {\ttfamily max\+Depth} argument. \mbox{\Hypertarget{classlog4cplus_1_1NDC_a7b5a0763d669cd127afa640e586f6a13}\label{classlog4cplus_1_1NDC_a7b5a0763d669cd127afa640e586f6a13}} 
\index{log4cplus::NDC@{log4cplus::NDC}!cloneStack@{cloneStack}}
\index{cloneStack@{cloneStack}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{cloneStack()}{cloneStack()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacelog4cplus_ac62a7721683971c9b4f2b697aa7f03fb}{Diagnostic\+Context\+Stack}} log4cplus\+::\+NDC\+::clone\+Stack (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Clone the diagnostic context for the current thread. 

Internally a diagnostic context is represented as a stack. A given thread can supply the stack (i.\+e. diagnostic context) to a child thread so that the child can inherit the parent thread\textquotesingle{}s diagnostic context.

The child thread uses the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a64169c244e495627d267f8d2d1105d32}{inherit}}} method to inherit the parent\textquotesingle{}s diagnostic context.

\begin{DoxyReturn}{Returns}
Stack A clone of the current thread\textquotesingle{}s diagnostic context. 
\end{DoxyReturn}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_ab5e5003eaa2ee38bd3363a39aed524a3}\label{classlog4cplus_1_1NDC_ab5e5003eaa2ee38bd3363a39aed524a3}} 
\index{log4cplus::NDC@{log4cplus::NDC}!get@{get}}
\index{get@{get}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} const  \& log4cplus\+::\+NDC\+::get (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Used when printing the diagnostic context. 



Referenced by \mbox{\hyperlink{loggingevent_8h_source_l00129}{log4cplus\+::spi\+::\+Internal\+Logging\+Event\+::get\+NDC()}}.

\mbox{\Hypertarget{classlog4cplus_1_1NDC_a0c192fcb5006c24cf54e679e9e16c284}\label{classlog4cplus_1_1NDC_a0c192fcb5006c24cf54e679e9e16c284}} 
\index{log4cplus::NDC@{log4cplus::NDC}!getDepth@{getDepth}}
\index{getDepth@{getDepth}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{getDepth()}{getDepth()}}
{\footnotesize\ttfamily std\+::size\+\_\+t log4cplus\+::\+NDC\+::get\+Depth (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Get the current nesting depth of this diagnostic context. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}{set\+Max\+Depth}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a64169c244e495627d267f8d2d1105d32}\label{classlog4cplus_1_1NDC_a64169c244e495627d267f8d2d1105d32}} 
\index{log4cplus::NDC@{log4cplus::NDC}!inherit@{inherit}}
\index{inherit@{inherit}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{inherit()}{inherit()}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::inherit (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacelog4cplus_ac62a7721683971c9b4f2b697aa7f03fb}{Diagnostic\+Context\+Stack}} \&}]{stack }\end{DoxyParamCaption})}



Inherit the diagnostic context of another thread. 

The parent thread can obtain a reference to its diagnostic context using the {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a7b5a0763d669cd127afa640e586f6a13}{clone\+Stack}}} method. It should communicate this information to its child so that it may inherit the parent\textquotesingle{}s diagnostic context.

The parent\textquotesingle{}s diagnostic context is cloned before being inherited. In other words, once inherited, the two diagnostic contexts can be managed independently.


\begin{DoxyParams}{Parameters}
{\em stack} & The diagnostic context of the parent thread. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a752d464b7a0572aa4e32185ce83ea6ad}\label{classlog4cplus_1_1NDC_a752d464b7a0572aa4e32185ce83ea6ad}} 
\index{log4cplus::NDC@{log4cplus::NDC}!peek@{peek}}
\index{peek@{peek}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{peek()}{peek()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} const  \& log4cplus\+::\+NDC\+::peek (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Looks at the last diagnostic context at the top of this \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} without removing it. 

The returned value is the value that was pushed last. If no context is available, then the empty string is returned.

\begin{DoxyReturn}{Returns}
String The innermost diagnostic context. 
\end{DoxyReturn}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}\label{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}} 
\index{log4cplus::NDC@{log4cplus::NDC}!pop@{pop}}
\index{pop@{pop}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{pop()}{pop()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} log4cplus\+::\+NDC\+::pop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clients should call this method before leaving a diagnostic context. 

The returned value is the value that was pushed last. If no context is available, then the empty string is returned. If each call to {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}}} is paired with a call to {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}} (even in presence of thrown exceptions), the last {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}} call frees the memory used by \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} for this thread. Otherwise, {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove()}}} must be called at the end of the thread to free the memory used by \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} for the thread.

\begin{DoxyReturn}{Returns}
String The innermost diagnostic context.
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classlog4cplus_1_1NDCContextCreator}{NDCContext\+Creator}}, \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove()}}, \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_ac5334784c1ddcc371d0140f5d97a6a1e}\label{classlog4cplus_1_1NDC_ac5334784c1ddcc371d0140f5d97a6a1e}} 
\index{log4cplus::NDC@{log4cplus::NDC}!pop\_void@{pop\_void}}
\index{pop\_void@{pop\_void}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{pop\_void()}{pop\_void()}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::pop\+\_\+void (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Same as \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}} but without the return value. 

\mbox{\Hypertarget{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}\label{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}} 
\index{log4cplus::NDC@{log4cplus::NDC}!push@{push}}
\index{push@{push}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{push()}{push()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::push (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespacelog4cplus_aba349b8deaa7763849968cfb0333dbb1}{log4cplus\+::tstring}} \&}]{message }\end{DoxyParamCaption})}



Push new diagnostic context information for the current thread. 

The contents of the {\ttfamily message} parameter is determined solely by the client. Each call to \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}} should be paired with a call to \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}.


\begin{DoxyParams}{Parameters}
{\em message} & The new diagnostic context information.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classlog4cplus_1_1NDCContextCreator}{NDCContext\+Creator}}, \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}, \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove()}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{classlog4cplus_1_1NDC_a5b4fb3774bbf66b9d8c995a57ee26feb}\label{classlog4cplus_1_1NDC_a5b4fb3774bbf66b9d8c995a57ee26feb}} 
\index{log4cplus::NDC@{log4cplus::NDC}!push@{push}}
\index{push@{push}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{push()}{push()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::push (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacelog4cplus_a7b80b5711ae9e7a1ddd97dbaefbe3583}{tchar}} const $\ast$}]{message }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}\label{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}} 
\index{log4cplus::NDC@{log4cplus::NDC}!remove@{remove}}
\index{remove@{remove}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::remove (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Remove the diagnostic context for this thread. 

Each thread that created a diagnostic context by calling \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}} should call this method before exiting. Otherwise, the memory used by the thread cannot be reclaimed. It is possible to omit this call if and only if each \mbox{\hyperlink{classlog4cplus_1_1NDC_a5ce2b0d8e4c225613fdd8a642a01c992}{push()}} call is always paired with a \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}} call (even in presence of thrown exceptions). Then the memory used by \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} will be returned by the last \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}} call and a call to \mbox{\hyperlink{classlog4cplus_1_1NDC_a43f2d8571dc52f6dc2bd737bb3f88099}{remove()}} will be no-\/op. \mbox{\Hypertarget{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}\label{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}} 
\index{log4cplus::NDC@{log4cplus::NDC}!setMaxDepth@{setMaxDepth}}
\index{setMaxDepth@{setMaxDepth}!log4cplus::NDC@{log4cplus::NDC}}
\doxysubsubsection{\texorpdfstring{setMaxDepth()}{setMaxDepth()}}
{\footnotesize\ttfamily void log4cplus\+::\+NDC\+::set\+Max\+Depth (\begin{DoxyParamCaption}\item[{std\+::size\+\_\+t}]{max\+Depth }\end{DoxyParamCaption})}



Set maximum depth of this diagnostic context. 

If the current depth is smaller or equal to {\ttfamily max\+Depth}, then no action is taken.

This method is a convenient alternative to multiple {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_a3f446e2479800b222b31cf7e30628c41}{pop()}}} calls. Moreover, it is often the case that at the end of complex call sequences, the depth of the \mbox{\hyperlink{classlog4cplus_1_1NDC}{NDC}} is unpredictable. The {\ttfamily \mbox{\hyperlink{classlog4cplus_1_1NDC_af905c21dfc8a4aedb0ac46a6a66936ff}{set\+Max\+Depth()}}} method circumvents this problem.

For example, the combination


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void} foo() \{}
\DoxyCodeLine{    \mbox{\hyperlink{classlog4cplus_1_1NDC_a8da3dcc190abd896c5f73cf1b968251f}{NDC}} \& ndc = \mbox{\hyperlink{namespacelog4cplus_a02d988bc9b136a6062ddc303efb6f627}{getNDC}}();}
\DoxyCodeLine{    std::size\_t depth = ndc.getDepth();}
\DoxyCodeLine{    \textcolor{comment}{//... complex sequence of calls}}
\DoxyCodeLine{    ndc.setMaxDepth(depth);}
\DoxyCodeLine{\}}

\end{DoxyCode}


ensures that between the entry and exit of foo the depth of the diagnostic stack is conserved.

\begin{DoxyNote}{Note}
Use of the \mbox{\hyperlink{classlog4cplus_1_1NDCContextCreator}{NDCContext\+Creator}} class will solve this particular problem.
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classlog4cplus_1_1NDC_a0c192fcb5006c24cf54e679e9e16c284}{NDC\+::get\+Depth()}} 
\end{DoxySeeAlso}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ndc_8h}{ndc.\+h}}\end{DoxyCompactItemize}
